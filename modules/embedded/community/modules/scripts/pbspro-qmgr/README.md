## Description

This module creates a Toolkit runner that performs the following administrative
PBS configurations on a PBS server:

- create Vnode configurations for each execution host
- configure the server to trust each client host for job submissions
- load a configuration file as formatted by `qmgr -c "print server"`

### Example

The following code snippet demonstrates use of this module:

```yaml
  - id: pbspro_qmgr
    source: community/modules/scripts/pbspro-qmgr
    settings:
      client_host_count: 1
      client_hostname_prefix: pbs-client
      execution_host_count: 10
      execution_hostname_prefix: pbs-execution
      server_conf: |
        set queue workq queue_type = Execution
        set queue workq enabled = True
        set queue workq started = True
        set server scheduling = True
        set server default_queue = workq
    outputs:
    - runners
```

Toolkit runners execute on first boot and all VM reboots. The `var.server_conf`
setting has been configured such that it will only execute upon changes to the
configuration. Nevertheless, care should be taken not to include commands that
will fail if run twice. For example, `create queue workq` would succeed upon
first boot but not a subsequent reboot.

## Support

PBS Professional is licensed and supported by [Altair][pbspro]. This module is
maintained and supported by the Cluster Toolkit team in collaboration with Altair.

[pbspro]: https://www.altair.com/pbs-professional

## License

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
Copyright 2022 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.13.0 |

## Providers

No providers.

## Modules

No modules.

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_client_host_count"></a> [client\_host\_count](#input\_client\_host\_count) | Number of execution hosts to provision | `number` | `0` | no |
| <a name="input_client_hostname_prefix"></a> [client\_hostname\_prefix](#input\_client\_hostname\_prefix) | Name prefix for execution hosts | `string` | n/a | yes |
| <a name="input_execution_host_count"></a> [execution\_host\_count](#input\_execution\_host\_count) | Number of execution hosts to provision | `number` | n/a | yes |
| <a name="input_execution_hostname_prefix"></a> [execution\_hostname\_prefix](#input\_execution\_hostname\_prefix) | Name prefix for execution hosts | `string` | n/a | yes |
| <a name="input_server_conf"></a> [server\_conf](#input\_server\_conf) | A sequence of qmgr commands in format as generated by qmgr -c 'print server' | `string` | `"# empty qmgr configuration file"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_runners"></a> [runners](#output\_runners) | Toolkit runners for qmgr commands |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
